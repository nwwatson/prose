<div id="ai-streaming-message-<%= chat.id %>" class="flex justify-start">
  <div class="max-w-[85%] rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-900">
    <div class="prose prose-sm max-w-none"
         data-controller="streaming-markdown"
         data-streaming-markdown-target="wrapper">
      <%# Hidden span where Turbo Stream broadcasts append raw text chunks %>
      <span id="ai-streaming-content-<%= chat.id %>"
            data-streaming-markdown-target="source"
            class="hidden"></span>
      <%# Visible output where markdown is progressively rendered %>
      <div data-streaming-markdown-target="output"></div>
      <span class="inline-block animate-pulse text-gray-400">...</span>
    </div>
  </div>
</div>
